{% extends "main/base.html" %}
{% block content %}
{% load static %}
      
<div class="bg-white">

  <!-- Slides Main Points Carrousel -->
  <section id="title-carousel" class="bg-[#e9e9e9] h-[calc(100vh-82px)] p-5 flex flex-col items-center overflow-hidden">

    <!-- Titles -->
    <div class="lg:h-80 h-[26rem] flex w-full justify-center items-center relative">
    <h1 class="absolute hidden max-w-4xl text-center text-3xl font-extrabold leading-none tracking-tight text-gray-900 md:text-5xl lg:text-6xl dark:text-white">
      Access Raw Material prices and forecasts for <span class="text-blue-600 dark:text-blue-500">10,000+</span> products</h1>
    
    <h1 class="absolute hidden max-w-4xl text-center text-3xl font-extrabold leading-none tracking-tight text-gray-900 md:text-5xl lg:text-6xl dark:text-white">
      Analyse any custom product risk <span class="text-blue-600 dark:text-blue-500">easier, faster, cheaper</span></h1>

    <h1 class="absolute hidden max-w-4xl text-center text-3xl font-extrabold leading-none tracking-tight text-gray-900 md:text-5xl lg:text-6xl dark:text-white">
      Understand forecasts with no experience in <span class="text-blue-600 dark:text-blue-500">Commodity Trading</span></h1>

    <h1 class="absolute hidden max-w-4xl text-center text-3xl font-extrabold leading-none tracking-tight text-gray-900 md:text-5xl lg:text-6xl dark:text-white">
      Know more than manufacturers and use the <span class="text-blue-600 dark:text-blue-500">information advantage</span></h1>
    </div>

    <!-- Slider indicators -->
    <div class="my-5 flex space-x-3">
      <button type="button" class="bg-black w-3 h-3 rounded-full" aria-label="Slide 1"></button>
      <button type="button" class="bg-gray-400 w-3 h-3 rounded-full" aria-label="Slide 2"></button>
      <button type="button" class="bg-gray-400 w-3 h-3 rounded-full" aria-label="Slide 3"></button>
      <button type="button" class="bg-gray-400 w-3 h-3 rounded-full" aria-label="Slide 4"></button>
    </div>

    <!-- Images -->
    <div class="w-full h-full">
    <div class="w-full relative flex justify-center">
    <img src="{% static 'main/images/ad.jpg' %}" class="absolute hidden rounded-lg" />
    <img src="{% static 'main/images/ad.jpg' %}" class="absolute hidden rounded-lg" />
    <img src="{% static 'main/images/ad.jpg' %}" class="absolute hidden rounded-lg" />
    <img src="{% static 'main/images/ad.jpg' %}" class="absolute hidden rounded-lg" />
    </div>
    </div>      

    <!-- Bouncing arrow -->
    <div class="animate-bounce bg-white dark:bg-slate-800 p-2 w-10 h-10 ring-1 ring-slate-900/5 dark:ring-slate-200/20 shadow-lg rounded-full flex items-center justify-center">
      <svg class="w-6 h-6 text-blue-500" fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" stroke="currentColor">
        <path d="M19 14l-7 7m0 0l-7-7m7 7V3"></path>
      </svg>
    </div>

  </section>
</div>
<script>
// Index home carousel
    // To change speed of transition
    const MS_TRANSITION = 3000;

    // Select all titles, images, and buttons
    const titles = document.querySelectorAll('#title-carousel > div > h1');
    const images = document.querySelectorAll('#title-carousel > div > div > img');
    const buttons = document.querySelectorAll('#title-carousel > .flex > button');

    let currentIndex = 0;
    const totalSlides = titles.length;

    // Function to update the active slide
    const updateSlide = (index) => {
        // Hide all titles and images with slide-out animation
        titles.forEach((title, idx) => {
            if (!title.classList.contains('hidden')) {
                title.classList.add('slide-out-right');
                title.addEventListener('animationend', () => {
                    title.classList.add('hidden');
                    title.classList.remove('slide-out-right');
                }, { once: true });
            }
        });

        images.forEach((image, idx) => {
            if (!image.classList.contains('hidden')) {
                image.classList.add('slide-out-right');
                image.addEventListener('animationend', () => {
                    image.classList.add('hidden');
                    image.classList.remove('slide-out-right');
                }, { once: true });
            }
        });

        // Remove active state from all buttons
        buttons.forEach(button => {
            button.classList.remove('bg-black');
            button.classList.add('bg-gray-400');
        });

        // Show the current title and image with slide-in animation
        titles[index].classList.remove('hidden');
        titles[index].classList.add('slide-in-left');
        titles[index].addEventListener('animationend', () => {
            titles[index].classList.remove('slide-in-left');
        }, { once: true });

        images[index].classList.remove('hidden');
        images[index].classList.add('slide-in-left');
        images[index].addEventListener('animationend', () => {
            images[index].classList.remove('slide-in-left');
        }, { once: true });

        // Highlight the current button
        buttons[index].classList.remove('bg-gray-400');
        buttons[index].classList.add('bg-black');
    };

    // Function to set a new interval
    const setNewInterval = () => {
        clearInterval(interval);
        interval = setInterval(() => {
            currentIndex = (currentIndex + 1) % totalSlides;
            updateSlide(currentIndex);
        }, MS_TRANSITION);
    };

    // Initialize the carousel
    updateSlide(currentIndex);
    let interval = setInterval(() => {
        currentIndex = (currentIndex + 1) % totalSlides;
        updateSlide(currentIndex);
    }, MS_TRANSITION);

    // Add event listeners to buttons
    buttons.forEach((button, index) => {
        button.addEventListener('click', () => {
            currentIndex = index;
            updateSlide(index);
            setNewInterval();  // Restart the automatic slide change
        });
    });
</script>

<style>
    .slide-in-left {
        animation: slideInLeft 0.5s cubic-bezier(0.4, 0, 0.2, 1) forwards;
    }
    
    .slide-out-right {
        animation: slideOutRight 0.5s cubic-bezier(0.4, 0, 0.2, 1) forwards;
    }
    
    @keyframes slideInLeft {
        from {
            opacity: 0;
            transform: translateX(-100%);
        }
        to {
            opacity: 1;
            transform: translateX(0);
        }
    }
    
    @keyframes slideOutRight {
        from {
            opacity: 1;
            transform: translateX(0);
        }
        to {
            opacity: 0;
            transform: translateX(100%);
        }
    }
</style>

{% endblock %}